:root {
  --background: hsl(var(--mauve-1));
  --foreground: hsl(var(--mauve-11));
  --foreground-true: hsl(var(--green-11));
  --foreground-false: hsl(var(--red-11));
  --focus: hsl(var(--mauve-12));
  --attention: hsl(0, 0%, 0%);
  --foreground-selected: hsl(var(--mauve-12));
  --progress-background: hsl(var(--mauve-6));
  --progress-background-selected: hsl(var(--mauve-7));
  --muted: hsl(var(--mauve-4));
  --frame: hsl(var(--mauve-3));
  --muted-foreground: hsl(var(--mauve-10));
  --popover: hsl(var(--mauve-1));
  --popover-foreground: hsl(var(--mauve-11));
  --card: hsl(var(--mauve-3));
  --card-selected: hsl(var(--mauve-4));
  --card-foreground: hsl(var(--mauve-11));
  --card-selected-foreground: hsl(var(--mauve-11));
  --border: hsl(var(--mauve-6));
  --input: hsl(var(--mauve-6));
  --primary: hsl(var(--blue-6));
  --primary-selected: hsl(var(--blue-7));
  --primary-foreground: hsl(var(--mauve-11));
  --primary-selected-foreground: hsl(var(--mauve-11));
  --secondary: hsl(var(--plum-6));
  --secondary-selected: hsl(var(--plum-7));
  --secondary-foreground: hsl(var(--mauve-11));
  --secondary-selected-foreground: hsl(var(--mauve-11));
  --selected: hsl(var(--violet-6));
  --selected-selected: hsl(var(--violet-7));
  --selected-foreground: hsl(var(--mauve-11));
  --selected-selected-foreground: hsl(var(--mauve-11));
  --accent: hsl(var(--violet-6));
  --accent-selected: hsl(var(--violet-7));
  --accent-foreground: hsl(var(--mauve-11));
  --accent-selected-foreground: hsl(var(--mauve-11));
  --navigation-icon: hsl(var(--violet-11));
  --destructive: hsl(var(--red-6));
  --destructive-selected: hsl(var(--red-10));
  --destructive-foreground: hsl(var(--mauve-11));
  --destructive-selected-foreground: hsl(var(--mauve-11));
  --ring: hsl(var(--blue-7));
  --radius: 0.5rem;
  --user-chat: hsl(var(--blue-5));
  --plexus-chat: hsl(var(--pink-5));
  --chart-1: hsl(var(--blue-6));
  --chart-1-selected: hsl(var(--blue-7));
  --chart-2: hsl(var(--pink-6));
  --chart-2-selected: hsl(var(--pink-7));
  --chart-3: hsl(var(--indigo-6));
  --chart-3-selected: hsl(var(--indigo-7));
  --chart-4: hsl(var(--plum-6));
  --chart-4-selected: hsl(var(--plum-7));
  --chart-5: hsl(var(--violet-6));
  --chart-5-selected: hsl(var(--violet-7));
  --chart-6: hsl(var(--crimson-6));
  --chart-6-selected: hsl(var(--crimson-7));
  --chart-7: hsl(var(--purple-6));
  --chart-7-selected: hsl(var(--purple-7));
  --true: hsl(var(--green-6));
  --true-selected: hsl(var(--green-7));
  --false: hsl(var(--red-6));
  --false-selected: hsl(var(--red-7));
  --neutral: hsl(var(--mauve-6));
  --neutral-selected: hsl(var(--mauve-7));
  --gauge-background: hsl(var(--mauve-2));
  --gauge-inviable: hsl(var(--mauve-6));
  --gauge-converging: hsl(var(--green-3));
  --gauge-almost: hsl(var(--green-5));
  --gauge-viable: hsl(var(--green-8));
  --gauge-great: hsl(var(--green-10));
  --editor-comment: hsl(var(--mauve-9));
  --editor-key: hsl(var(--blue-9));
  --editor-string: hsl(var(--violet-9));
  --editor-number: hsl(var(--pink-9));
  --editor-keyword: hsl(var(--violet-9));
}

.dark {
  --background: hsl(var(--mauve-1));
  --foreground: hsl(var(--mauve-11));
  --foreground-true: hsl(var(--green-11));
  --foreground-false: hsl(var(--red-11));
  --focus: hsl(var(--mauve-12));
  --attention: hsl(0, 0%, 100%);
  --foreground-selected: hsl(var(--mauve-12));
  --progress-background: hsl(var(--mauve-6));
  --progress-background-selected: hsl(var(--mauve-7));
  --muted: hsl(var(--mauve-3));
  --frame: hsl(var(--mauve-2));
  --muted-foreground: hsl(var(--mauve-10));
  --popover: hsl(var(--mauve-3));
  --popover-foreground: hsl(var(--mauve-11));
  --card: hsl(var(--mauve-2));
  --card-selected: hsl(var(--mauve-3));
  --card-foreground: hsl(var(--mauve-11));
  --card-selected-foreground: hsl(var(--mauve-11));
  --border: hsl(var(--mauve-6));
  --input: hsl(var(--mauve-6));
  --primary: hsl(var(--blue-6));
  --primary-selected: hsl(var(--blue-7));
  --primary-foreground: hsl(var(--mauve-11));
  --primary-selected-foreground: hsl(var(--mauve-11));
  --secondary: hsl(var(--plum-6));
  --secondary-selected: hsl(var(--plum-7));
  --secondary-foreground: hsl(var(--mauve-11));
  --secondary-selected-foreground: hsl(var(--mauve-11));
  --selected: hsl(var(--violet-6));
  --selected-selected: hsl(var(--violet-7));
  --selected-foreground: hsl(var(--mauve-11));
  --selected-selected-foreground: hsl(var(--mauve-11));
  --accent: hsl(var(--violet-6));
  --accent-selected: hsl(var(--violet-7));
  --accent-foreground: hsl(var(--mauve-11));
  --accent-selected-foreground: hsl(var(--mauve-11));
  --navigation-icon: hsl(var(--violet-11));
  --destructive: hsl(var(--red-9));
  --destructive-selected: hsl(var(--red-10));
  --destructive-foreground: hsl(var(--mauve-1));
  --destructive-selected-foreground: hsl(var(--mauve-1));
  --ring: hsl(var(--blue-7));
  --user-chat: hsl(var(--blue-5));
  --plexus-chat: hsl(var(--pink-5));
  --chart-1: hsl(var(--blue-6));
  --chart-1-selected: hsl(var(--blue-7));
  --chart-2: hsl(var(--pink-6));
  --chart-2-selected: hsl(var(--pink-7));
  --chart-3: hsl(var(--indigo-6));
  --chart-3-selected: hsl(var(--indigo-7));
  --chart-4: hsl(var(--plum-6));
  --chart-4-selected: hsl(var(--plum-7));
  --chart-5: hsl(var(--violet-6));
  --chart-5-selected: hsl(var(--violet-7));
  --chart-6: hsl(var(--crimson-6));
  --chart-6-selected: hsl(var(--crimson-7));
  --chart-7: hsl(var(--purple-6));
  --chart-7-selected: hsl(var(--purple-7));
  --true: hsl(var(--green-6));
  --true-selected: hsl(var(--green-7));
  --false: hsl(var(--red-6));
  --false-selected: hsl(var(--red-7));
  --neutral: hsl(var(--mauve-6));
  --neutral-selected: hsl(var(--mauve-7));
  --gauge-background: hsl(var(--mauve-2));
  --gauge-inviable: hsl(var(--mauve-6));
  --gauge-converging: hsl(var(--green-6));
  --gauge-almost: hsl(var(--green-7));
  --gauge-viable: hsl(var(--green-8));
  --gauge-great: hsl(var(--green-10));
  --editor-comment: hsl(var(--mauve-9));
  --editor-key: hsl(var(--blue-9));
  --editor-string: hsl(var(--violet-9));
  --editor-number: hsl(var(--pink-9));
  --editor-keyword: hsl(var(--violet-9));
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-background text-foreground;
  }
}

/* Prevent horizontal scroll on all screen sizes */
html {
  overflow-x: hidden;
}

body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Navigation loading animations */
@keyframes loading-bar {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-loading-bar {
  animation: loading-bar 2s ease-in-out infinite;
}

.new-item-shadow {
  box-shadow: 0 4px 12px hsl(var(--secondary) / 0.4);
  animation: fadeInSmooth 2s ease-out;
}

.new-item-glow {
  filter: drop-shadow(0 0 1em hsl(var(--blue-6)));
  animation: fadeInAndOutGlowPrimary 4s ease-out forwards;
}

.new-score-result-glow {
  filter: drop-shadow(0 0 1em hsl(var(--plum-6)));
  animation: fadeInAndOutGlowSecondary 4s ease-out forwards;
}

.selected-border-rounded::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--selected);
  border-radius: 0.5rem;
  pointer-events: none;
  z-index: 0;
}

.selected-border-rounded::after {
  content: '';
  position: absolute;
  top: 0.375rem;
  left: 0.375rem;
  right: 0.375rem;
  bottom: 0.375rem;
  background: var(--background);
  border-radius: 0.25rem;
  pointer-events: none;
  z-index: 0;
}

/* Error items get destructive background */
.error-border-rounded {
  background: var(--destructive) !important;
}

/* Selected error items should still show destructive background, not selected background */
.selected-border-rounded.error-border-rounded {
  background: var(--destructive) !important;
}

/* Content area for selected error items should also have destructive background */
.selected-border-rounded.error-border-rounded::after {
  background: var(--destructive);
}

@keyframes fadeInSmooth {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeInAndOutGlowPrimary {
  0% {
    opacity: 0;
    filter: drop-shadow(0 0 1em hsl(var(--blue-6)));
  }
  10% {
    opacity: 1;
    filter: drop-shadow(0 0 1em hsl(var(--blue-6)));
  }
  100% {
    opacity: 1;
    filter: drop-shadow(0 0 0em transparent);
  }
}

@keyframes fadeInAndOutGlowSecondary {
  0% {
    opacity: 0;
    filter: drop-shadow(0 0 1em hsl(var(--plum-6)));
  }
  10% {
    opacity: 1;
    filter: drop-shadow(0 0 1em hsl(var(--plum-6)));
  }
  100% {
    opacity: 1;
    filter: drop-shadow(0 0 0em transparent);
  }
}

@keyframes destructive-throb {
  0%, 100% {
    background-color: hsl(var(--destructive)) !important;
  }
  50% {
    background-color: hsl(var(--destructive) / 0.85) !important;
  }
}

.steady-text {
  animation: none !important;
  opacity: 1 !important;
}

@keyframes bg-pulse {
  0%, 100% { background-color: hsl(var(--destructive)); }
  50% { background-color: hsl(var(--destructive) / 0.8); }
}

.error-throb {
  animation: bg-pulse 2s infinite ease-in-out;
}

@keyframes glow {
  0%, 100% { 
    box-shadow: 0 0 5px hsl(var(--destructive));
  }
  50% { 
    box-shadow: 0 0 15px hsl(var(--destructive)), 0 0 25px hsl(var(--destructive));
  }
}

@import "hsl-radix-colors/mauve.css";
@import "hsl-radix-colors/blue.css";
@import "hsl-radix-colors/pink.css";
@import "hsl-radix-colors/violet.css";
@import "hsl-radix-colors/crimson.css";
@import "hsl-radix-colors/purple.css";
@import "hsl-radix-colors/iris.css";
@import "hsl-radix-colors/plum.css";
@import "hsl-radix-colors/green.css";
@import "hsl-radix-colors/red.css";
@import "hsl-radix-colors/indigo.css";
@import "hsl-radix-colors/orange.css";
@import "hsl-radix-colors/yellow.css";

/* Ultra-narrow mobile optimizations for iPhone support */
@media (max-width: 375px) {
  .mobile-compact {
    font-size: 0.875rem;
    padding: 0.25rem;
  }
  
  .mobile-sidebar {
    width: min(75vw, 12rem) !important;
    min-width: unset !important;
    max-width: unset !important;
  }
  
  .mobile-header {
    padding: 0.25rem 0.5rem;
    min-height: 2.5rem;
  }
  
  /* Ensure main content has enough space */
  .mobile-main {
    min-width: 0 !important;
    flex: 1 !important;
  }
}

@media (max-width: 320px) {
  .mobile-sidebar {
    width: min(70vw, 10rem) !important;
    min-width: unset !important;
    max-width: unset !important;
  }
  
  .mobile-compact {
    font-size: 0.8125rem;
    padding: 0.125rem;
  }
  
  .mobile-header {
    padding: 0.125rem 0.25rem;
    min-height: 2.25rem;
  }
}

/* Extra small screens (iPhone SE and similar) */
@media (max-width: 280px) {
  .mobile-sidebar {
    width: min(80vw, 9rem) !important;
  }
  
  .mobile-compact {
    font-size: 0.75rem;
    padding: 0.0625rem;
  }
  
  .mobile-header {
    padding: 0.125rem;
    min-height: 2rem;
  }
}

/* AGGRESSIVE iPhone optimizations - Force fit everything */
@media (max-width: 480px) {
  html, body {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100vw !important;
    position: relative !important;
  }
  
  * {
    min-width: 0 !important;
    max-width: 100vw !important;
    box-sizing: border-box !important;
  }
  
  /* Force all containers to fit viewport */
  .dashboard-container {
    width: 100vw !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    position: relative !important;
  }
  
  .dashboard-container > div {
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
  
  /* Ensure main content area never exceeds viewport */
  main {
    width: 100% !important;
    max-width: calc(100vw - 0.5rem) !important;
    overflow-x: hidden !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0.25rem !important;
    padding-right: 0.25rem !important;
    flex-shrink: 1 !important;
  }
  
  main > div {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
  
  /* Force sidebar to be overlay only, never push content */
  aside {
    position: fixed !important;
    z-index: 40 !important;
  }
  
  /* Ensure dropdown menus appear above mobile sidebar */
  [data-radix-popper-content-wrapper],
  [data-radix-dropdown-menu-content] {
    z-index: 9999 !important;
  }
  
  /* Prevent any element from causing horizontal scroll */
  .bg-background,
  .bg-card,
  .bg-frame {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
}

/* iPhone specific fixes */
@media (max-width: 375px) {
  .mobile-sidebar {
    width: min(80vw, 11rem) !important;
  }
  
  /* Hide right sidebar on iPhone to save space */
  .mobile-hide-right-sidebar {
    display: none !important;
  }
}

@media (max-width: 320px) {
  .mobile-sidebar {
    width: min(85vw, 10rem) !important;
  }
  
  main {
    padding-left: 0.125rem !important;
    padding-right: 0.125rem !important;
  }
}

[data-amplify-authenticator] {
  --amplify-components-authenticator-router-box-shadow: none;
  --amplify-components-authenticator-router-border-width: 2px;
  --amplify-components-authenticator-form-padding: 1rem 2rem;
  --amplify-components-button-primary-background-color: hsl(var(--blue-8));
  --amplify-components-button-primary-foreground-color: hsl(var(--mauve-1));
  --amplify-components-button-primary-color: hsl(var(--mauve-1));
  --amplify-components-button-primary-hover-background-color: hsl(var(--pink-8));
  --amplify-components-fieldcontrol-focus-box-shadow: 0 0 0 2px hsl(var(--pink-8));
  --amplify-components-tabs-item-active-border-color: hsl(var(--pink-8));
  --amplify-components-tabs-item-color: hsl(var(--mauve-11));
  --amplify-components-tabs-item-active-color: hsl(var(--pink-8));
  --amplify-components-button-link-color: hsl(var(--violet-11));
}
