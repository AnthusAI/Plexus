"use strict";(self.webpackChunkaws_amplify_gen2=self.webpackChunkaws_amplify_gen2||[]).push([[5104],{"./stories/ScoringJobTask.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Complete:()=>Complete,Default:()=>Default,DetailView:()=>DetailView,WithError:()=>WithError,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ScoringJobTask_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),Task=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./components/Task.tsx")),clipboard_check=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/clipboard-check.js"),badge=__webpack_require__("./components/ui/badge.tsx"),utils=__webpack_require__("./lib/utils.ts"),progress_bar=__webpack_require__("./components/ui/progress-bar.tsx"),BatchJobTask=__webpack_require__("./components/BatchJobTask.tsx");function ScoringJobTask({variant="grid",task,onClick,controlButtons,isFullWidth,onToggleFullWidth,onClose}){var _task_data;const data=null!==(_task_data=task.data)&&void 0!==_task_data?_task_data:{},statusDisplay={pending:{text:"Pending",variant:"secondary"},in_progress:{text:"In Progress",variant:"default"},done:{text:"Done",variant:"success"},failed:{text:"Failed",variant:"destructive"},canceled:{text:"Canceled",variant:"warning"}}[(status=data.status).toLowerCase()]||{text:status,variant:"default"};var status;const visualization=(0,jsx_runtime.jsxs)("div",{className:"flex flex-col h-full",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-end mb-4",children:(0,jsx_runtime.jsx)(badge.E,{variant:statusDisplay.variant,className:(0,utils.cn)("capitalize w-24 flex justify-center","success"===statusDisplay.variant&&"bg-green-600","warning"===statusDisplay.variant&&"bg-yellow-600","destructive"===statusDisplay.variant&&"bg-red-600"),children:statusDisplay.text})}),data.errorMessage&&(0,jsx_runtime.jsxs)("div",{className:"mt-2 text-sm text-destructive whitespace-pre-wrap",children:["Error: ",data.errorMessage]})]}),(0,jsx_runtime.jsx)("div",{className:"flex-1"}),(0,jsx_runtime.jsx)(progress_bar.z,{progress:data.completedItems/data.totalItems*100,processedItems:data.completedItems,totalItems:data.totalItems,color:"secondary"}),"detail"===variant&&data.batchJobs&&(0,jsx_runtime.jsxs)("div",{className:"mt-8",children:[(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted-foreground tracking-wider mb-2",children:"Batch jobs"}),(0,jsx_runtime.jsx)("hr",{className:"mb-4 border-border"}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:data.batchJobs.map((batchJob=>(0,jsx_runtime.jsx)(BatchJobTask.A,{variant:"grid",task:{id:batchJob.id,type:"Batch Job",scorecard:task.scorecard,score:task.score,time:task.time,summary:`${batchJob.type} job`,data:{id:batchJob.id,modelProvider:batchJob.modelProvider,modelName:batchJob.modelName,type:batchJob.type,status:batchJob.status,totalRequests:batchJob.totalRequests,completedRequests:batchJob.completedRequests,failedRequests:batchJob.failedRequests,startedAt:batchJob.startedAt||null,estimatedEndAt:batchJob.estimatedEndAt||null,completedAt:batchJob.completedAt||null,errorMessage:batchJob.errorMessage||null,errorDetails:batchJob.errorDetails||{},scoringJobs:[]}}},batchJob.id)))})]})]});return(0,jsx_runtime.jsx)(Task.YZ,{variant,task:{...task,data:{...data,progress:data.completedItems/data.totalItems*100}},onClick,controlButtons,isFullWidth,onToggleFullWidth,onClose,renderHeader:props=>(0,jsx_runtime.jsx)(Task.$H,{...props,children:(0,jsx_runtime.jsx)("div",{className:"flex justify-end w-full",children:(0,jsx_runtime.jsx)(clipboard_check.A,{className:"h-6 w-6"})})}),renderContent:props=>(0,jsx_runtime.jsx)(Task.lG,{...props,visualization})})}ScoringJobTask.__docgenInfo={description:"",methods:[],displayName:"ScoringJobTask",props:{variant:{required:!1,tsType:{name:"union",raw:"'grid' | 'detail' | 'nested'",elements:[{name:"literal",value:"'grid'"},{name:"literal",value:"'detail'"},{name:"literal",value:"'nested'"}]},description:"",defaultValue:{value:'"grid"',computed:!1}},task:{required:!0,tsType:{name:"signature",type:"object",raw:"{\n  id: string\n  type: string\n  scorecard: string\n  score: string\n  time: string\n  summary?: string\n  description?: string\n  data?: TData\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"scorecard",value:{name:"string",required:!0}},{key:"score",value:{name:"string",required:!0}},{key:"time",value:{name:"string",required:!0}},{key:"summary",value:{name:"string",required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"data",value:{name:"ScoringJobTaskData",required:!1}}]}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},controlButtons:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isFullWidth:{required:!1,tsType:{name:"boolean"},description:""},onToggleFullWidth:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ScoringJobTask_stories={title:"Tasks/Types/ScoringJobTask",component:ScoringJobTask,parameters:{layout:"centered"}},defaultTask={id:"1",type:"Scoring Job",scorecard:"Test Scorecard",score:"Test Score",time:(new Date).toISOString(),summary:"Test Summary",data:{type:"scoring",status:"running",modelProvider:"OpenAI",modelName:"gpt-4",totalRequests:100,completedRequests:50,failedRequests:0,startedAt:(new Date).toISOString(),scoringJobs:[]}},Default={args:{task:defaultTask}},WithError={args:{task:{...defaultTask,data:{...defaultTask.data,status:"failed",errorMessage:"Failed to connect to scoring service",totalItems:300,completedItems:145,batchJobs:[{id:"1",modelProvider:"OpenAI",modelName:"gpt-4",type:"sentiment-analysis",status:"failed",totalRequests:100,completedRequests:50,failedRequests:50,errorMessage:"API rate limit exceeded"},{id:"2",modelProvider:"Anthropic",modelName:"claude-2",type:"categorization",status:"canceled",totalRequests:100,completedRequests:0,failedRequests:0}]}}}},Complete={args:{task:{...defaultTask,data:{...defaultTask.data,status:"done",totalItems:300,completedItems:300,batchJobs:[{id:"1",modelProvider:"OpenAI",modelName:"gpt-4",type:"sentiment-analysis",status:"done",totalRequests:100,completedRequests:100,failedRequests:0},{id:"2",modelProvider:"Anthropic",modelName:"claude-2",type:"categorization",status:"done",totalRequests:100,completedRequests:100,failedRequests:0}]}}}},DetailView={args:{variant:"detail",task:defaultTask},decorators:[Story=>(0,jsx_runtime.jsx)("div",{className:"w-[600px]",children:(0,jsx_runtime.jsx)(Story,{})})]},__namedExportsOrder=["Default","WithError","Complete","DetailView"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    task: defaultTask\n  }\n}",...Default.parameters?.docs?.source}}},WithError.parameters={...WithError.parameters,docs:{...WithError.parameters?.docs,source:{originalSource:"{\n  args: {\n    task: {\n      ...defaultTask,\n      data: {\n        ...defaultTask.data,\n        status: 'failed',\n        errorMessage: 'Failed to connect to scoring service',\n        totalItems: 300,\n        completedItems: 145,\n        batchJobs: [{\n          id: '1',\n          modelProvider: 'OpenAI',\n          modelName: 'gpt-4',\n          type: 'sentiment-analysis',\n          status: 'failed',\n          totalRequests: 100,\n          completedRequests: 50,\n          failedRequests: 50,\n          errorMessage: 'API rate limit exceeded'\n        }, {\n          id: '2',\n          modelProvider: 'Anthropic',\n          modelName: 'claude-2',\n          type: 'categorization',\n          status: 'canceled',\n          totalRequests: 100,\n          completedRequests: 0,\n          failedRequests: 0\n        }]\n      }\n    }\n  }\n}",...WithError.parameters?.docs?.source}}},Complete.parameters={...Complete.parameters,docs:{...Complete.parameters?.docs,source:{originalSource:"{\n  args: {\n    task: {\n      ...defaultTask,\n      data: {\n        ...defaultTask.data,\n        status: 'done',\n        totalItems: 300,\n        completedItems: 300,\n        batchJobs: [{\n          id: '1',\n          modelProvider: 'OpenAI',\n          modelName: 'gpt-4',\n          type: 'sentiment-analysis',\n          status: 'done',\n          totalRequests: 100,\n          completedRequests: 100,\n          failedRequests: 0\n        }, {\n          id: '2',\n          modelProvider: 'Anthropic',\n          modelName: 'claude-2',\n          type: 'categorization',\n          status: 'done',\n          totalRequests: 100,\n          completedRequests: 100,\n          failedRequests: 0\n        }]\n      }\n    }\n  }\n}",...Complete.parameters?.docs?.source}}},DetailView.parameters={...DetailView.parameters,docs:{...DetailView.parameters?.docs,source:{originalSource:"{\n  args: {\n    variant: 'detail',\n    task: defaultTask\n  },\n  decorators: [Story => <div className=\"w-[600px]\">\n        <Story />\n      </div>]\n}",...DetailView.parameters?.docs?.source}}}},"./components/ui/progress-bar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>ProgressBar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./lib/utils.ts")),_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/loader-circle.js"),_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/circle-check.js"),_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/alarm-clock.js"),_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/alarm-clock-check.js");function ProgressBar({progress,className,elapsedTime,processedItems,totalItems,estimatedTimeRemaining,color="secondary",isFocused=!1}){const displayProgress=Math.round(progress),clampedProgress=Math.min(Math.max(displayProgress,0),100),isInProgress=clampedProgress<100;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col gap-1",className),children:[(elapsedTime||estimatedTimeRemaining)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between text-sm text-foreground h-5",children:[elapsedTime&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1",children:[isInProgress?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_3__.A,{className:"w-4 h-4 text-foreground animate-spin shrink-0"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_4__.A,{className:"w-4 h-4 text-foreground shrink-0"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:["Elapsed: ",elapsedTime]})]}),estimatedTimeRemaining&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1",children:[isInProgress?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:["ETA:"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(isFocused&&"text-focus"),children:estimatedTimeRemaining})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Done"}),isInProgress?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:"w-4 h-4 text-foreground shrink-0"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_AlarmClock_AlarmClockCheck_CircleCheck_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:"w-4 h-4 text-foreground shrink-0"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative w-full h-8 bg-neutral rounded-md",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("absolute top-0 left-0 h-full rounded-md transition-all",`bg-${color}`,clampedProgress>0?`bg-${color}`:""),style:{width:clampedProgress>0?`${clampedProgress}%`:"auto"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"absolute top-0 left-0 right-0 h-full flex justify-between items-center px-2",children:[void 0!==processedItems&&void 0!==totalItems&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm font-medium",isFocused?"text-focus":"text-primary-foreground"),children:processedItems}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-sm font-medium text-primary-foreground",children:" / "}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm font-medium",isFocused&&processedItems!==totalItems?"text-focus":"text-primary-foreground"),children:totalItems})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm font-medium",isFocused&&isInProgress?"text-focus":"text-primary-foreground"),children:[displayProgress,"%"]})]})]})]})}ProgressBar.__docgenInfo={description:"",methods:[],displayName:"ProgressBar",props:{progress:{required:!0,tsType:{name:"number"},description:""},className:{required:!1,tsType:{name:"string"},description:""},elapsedTime:{required:!1,tsType:{name:"string"},description:""},processedItems:{required:!1,tsType:{name:"number"},description:""},totalItems:{required:!1,tsType:{name:"number"},description:""},estimatedTimeRemaining:{required:!1,tsType:{name:"string"},description:""},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | 'true' | 'false' | 'neutral'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'true'"},{name:"literal",value:"'false'"},{name:"literal",value:"'neutral'"}]},description:"",defaultValue:{value:"'secondary'",computed:!1}},isFocused:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}}}]);