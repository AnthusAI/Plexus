"use strict";(self.webpackChunkaws_amplify_gen2=self.webpackChunkaws_amplify_gen2||[]).push([[8218],{"./stories/ScorecardContext.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Loading:()=>Loading,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ScorecardContext_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),ui_select=__webpack_require__("./components/ui/select.tsx"),API=__webpack_require__("./node_modules/@aws-amplify/api/dist/esm/API.mjs"),console=__webpack_require__("./node_modules/console-browserify/index.js");async function listFromModel(model,filter,nextToken,limit){console.log("Listing from model:",{modelName:null==model?void 0:model.name,filter,nextToken,limit});const options={};filter&&(options.filter=filter),nextToken&&(options.nextToken=nextToken),limit&&(options.limit=limit);try{var _allData_,_allData_1;let allData=[],currentNextToken=nextToken;do{var _response_data,_response_data1,_response_data2;currentNextToken&&(options.nextToken=currentNextToken);const response=await model.list(options);console.log("List page response:",{count:null===(_response_data=response.data)||void 0===_response_data?void 0:_response_data.length,nextToken:response.nextToken,sampleItem:(null===(_response_data1=response.data)||void 0===_response_data1?void 0:_response_data1[0])?{id:response.data[0].id,allFields:Object.keys(response.data[0])}:null}),(null===(_response_data2=response.data)||void 0===_response_data2?void 0:_response_data2.length)&&(allData=[...allData,...response.data]),currentNextToken=response.nextToken}while(currentNextToken);return console.log("All pages fetched:",{totalCount:allData.length,firstId:null===(_allData_=allData[0])||void 0===_allData_?void 0:_allData_.id,lastId:null===(_allData_1=allData[allData.length-1])||void 0===_allData_1?void 0:_allData_1.id}),{data:allData,nextToken:null}}catch(error){throw console.error("Error listing from model:",error),error}}var ScorecardContext_console=__webpack_require__("./node_modules/console-browserify/index.js");const client=(0,API.D)();const ScorecardContext=({selectedScorecard,setSelectedScorecard,selectedScore,setSelectedScore,availableFields:mockFields,timeRangeOptions:mockScores,useMockData=!1})=>{const[scorecards,setScorecards]=(0,react.useState)([]),[scores,setScores]=(0,react.useState)([]),[isLoading,setIsLoading]=(0,react.useState)(!useMockData);return(0,react.useEffect)((()=>{useMockData||async function fetchScorecards(){try{const{data:scorecardModels}=await async function listScorecards(){return listFromModel(client.models.Scorecard)}(),formattedScorecards=scorecardModels.map((scorecard=>({value:scorecard.id,label:scorecard.name})));setScorecards(formattedScorecards)}catch(error){ScorecardContext_console.error("Error fetching scorecards:",error)}finally{setIsLoading(!1)}}()}),[useMockData]),(0,react.useEffect)((()=>{!useMockData&&selectedScorecard&&async function fetchScores(){try{if(!selectedScorecard)return;const{data:sections}=await async function listSections(scorecardId){return listFromModel(client.models.ScorecardSection,{scorecardId:{eq:scorecardId}})}(selectedScorecard),scorePromises=sections.map((async section=>{const{data:scores}=await async function listScores(sectionId){return listFromModel(client.models.Score,{sectionId:{eq:sectionId}})}(section.id);return scores})),scoreResults=await Promise.all(scorePromises),uniqueScores=new Set;scoreResults.flat().forEach((score=>{(null==score?void 0:score.name)&&uniqueScores.add(score.name)})),setScores(Array.from(uniqueScores).map((name=>({value:name,label:name}))))}catch(error){ScorecardContext_console.error("Error fetching scores:",error)}}()}),[selectedScorecard,useMockData]),isLoading?(0,jsx_runtime.jsx)("div",{children:"Loading scorecards..."}):(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsxs)(ui_select.l6,{onValueChange:value=>{setSelectedScorecard("all"===value?null:value)},children:[(0,jsx_runtime.jsx)(ui_select.bq,{className:"w-[200px] h-8 bg-card-light border-none",children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Scorecard"})}),(0,jsx_runtime.jsxs)(ui_select.gC,{className:"bg-card border-none",children:[(0,jsx_runtime.jsx)(ui_select.eb,{value:"all",children:"All Scorecards"}),null==scorecards?void 0:scorecards.map((field=>(0,jsx_runtime.jsx)(ui_select.eb,{value:field.value,children:field.label},field.value)))]})]}),(0,jsx_runtime.jsxs)(ui_select.l6,{onValueChange:value=>setSelectedScore("all"===value?null:value),disabled:!selectedScorecard,value:selectedScore||"all",children:[(0,jsx_runtime.jsx)(ui_select.bq,{className:"w-[200px] h-8 bg-card-light border-none",children:(0,jsx_runtime.jsx)(ui_select.yv,{placeholder:"Score"})}),(0,jsx_runtime.jsxs)(ui_select.gC,{className:"bg-card border-none",children:[(0,jsx_runtime.jsx)(ui_select.eb,{value:"all",children:"All Scores"}),selectedScorecard&&(null==scores?void 0:scores.map((option=>(0,jsx_runtime.jsx)(ui_select.eb,{value:option.value,children:option.label},option.value))))]})]})]})},components_ScorecardContext=ScorecardContext;ScorecardContext.__docgenInfo={description:"",methods:[],displayName:"ScorecardContext",props:{selectedScorecard:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},setSelectedScorecard:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"value"}],return:{name:"void"}}},description:""},selectedScore:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},setSelectedScore:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"value"}],return:{name:"void"}}},description:""},availableFields:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: string; label: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"Array<{ value: string; label: string }>"},description:""},timeRangeOptions:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: string; label: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"Array<{ value: string; label: string }>"},description:""},useMockData:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const ScorecardContext_stories={title:"Context/ScorecardContext",component:components_ScorecardContext},Template=args=>(0,jsx_runtime.jsx)(components_ScorecardContext,{...args}),Default=Template.bind({});Default.args={selectedScorecard:null,setSelectedScorecard:()=>{},selectedScore:null,setSelectedScore:()=>{},useMockData:!0,availableFields:[{value:"scorecard-1",label:"SelectQuote Term Life v1"},{value:"scorecard-2",label:"CS3 Nexstar v1"},{value:"scorecard-3",label:"CS3 Services v2"},{value:"scorecard-4",label:"CS3 Audigy"}],timeRangeOptions:[{value:"good-call",label:"Good Call"},{value:"agent-branding",label:"Agent Branding"},{value:"temperature-check",label:"Temperature Check"},{value:"assumptive-close",label:"Assumptive Close"}]};const Loading=Template.bind({});Loading.args={selectedScorecard:null,setSelectedScorecard:()=>{},selectedScore:null,setSelectedScore:()=>{},useMockData:!1};const __namedExportsOrder=["Default","Loading"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <ScorecardContext {...args} />",...Default.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"args => <ScorecardContext {...args} />",...Loading.parameters?.docs?.source}}}},"./components/ui/select.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{bq:()=>SelectTrigger,eb:()=>SelectItem,gC:()=>SelectContent,l6:()=>Select,yv:()=>SelectValue});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-icons/dist/react-icons.esm.js"),_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@radix-ui/react-select/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./lib/utils.ts");const Select=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.bL,SelectValue=(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.YJ,_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.WT),SelectTrigger=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.l9,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",className),...props,children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.In,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__.TBE,{className:"h-4 w-4 opacity-50"})})]})));SelectTrigger.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.l9.displayName;const SelectScrollUpButton=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.PP,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("flex cursor-default items-center justify-center py-1",className),...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__.Mtm,{})})));SelectScrollUpButton.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.PP.displayName;const SelectScrollDownButton=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wn,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("flex cursor-default items-center justify-center py-1",className),...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__.D3D,{})})));SelectScrollDownButton.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wn.displayName;const SelectContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,position="popper",...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.ZL,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.UC,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===position&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",className),position,...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectScrollUpButton,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.LM,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("p-1","popper"===position&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SelectScrollDownButton,{})]})})));SelectContent.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.UC.displayName;const SelectLabel=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.JU,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("px-2 py-1.5 text-sm font-semibold",className),...props})));SelectLabel.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.JU.displayName;const SelectItem=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.q7,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",className),...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.VF,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_icons__WEBPACK_IMPORTED_MODULE_4__.Srz,{className:"h-4 w-4"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.p4,{children})]})));SelectItem.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.q7.displayName;const SelectSeparator=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wv,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("-mx-1 my-1 h-px bg-muted",className),...props})));SelectSeparator.displayName=_radix_ui_react_select__WEBPACK_IMPORTED_MODULE_2__.wv.displayName,SelectTrigger.__docgenInfo={description:"",methods:[]},SelectContent.__docgenInfo={description:"",methods:[],props:{position:{defaultValue:{value:'"popper"',computed:!1},required:!1}}},SelectLabel.__docgenInfo={description:"",methods:[]},SelectItem.__docgenInfo={description:"",methods:[]},SelectSeparator.__docgenInfo={description:"",methods:[]},SelectScrollUpButton.__docgenInfo={description:"",methods:[]},SelectScrollDownButton.__docgenInfo={description:"",methods:[]}},"./lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cn:()=>cn});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.$)(inputs))}}}]);